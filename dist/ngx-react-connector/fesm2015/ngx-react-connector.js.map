{"version":3,"file":"ngx-react-connector.js","sources":["ng://ngx-react-connector/lib/react-connector/react-connector.component.tsx","ng://ngx-react-connector/lib/react-connector/react-connector.directive.ts","ng://ngx-react-connector/lib/react-connector/react-connector.service.ts","ng://ngx-react-connector/lib/react-connector.module.ts","ng://ngx-react-connector/public-api.ts","ng://ngx-react-connector/ngx-react-connector.ts"],"sourcesContent":["import { Component, ViewChild, ElementRef, AfterViewInit, Input, OnDestroy, HostBinding } from '@angular/core';\nimport * as ReactDOM from 'react-dom';\nimport * as React from 'react';\n\n@Component({\n\tselector: 'rc-render-container',\n\ttemplate: `<div [ngClass]=\"classContainer\" #container></div>`,\n\tstyles: ['.react-connector { display:block; }']\n})\nexport class ReactConnectorComponent implements AfterViewInit, OnDestroy {\n\n\t@HostBinding('class') class = 'react-connector';\n\n\t@ViewChild('container', {read: ElementRef}) private _containerRef: ElementRef;\n\n\t@Input() reactComponentRef: any;\n\n\t@Input() props: {[key: string]: any} | undefined;\n\n\t@Input() events: {[key: string]: () => any} | undefined;\n\n\t@Input() classContainer: string | undefined;\n\n\tconstructor() { }\n\n\tngAfterViewInit(): void {\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tif (this.reactComponentRef && this._containerRef) {\n\t\t\tReactDOM.render(React.createElement(this.reactComponentRef, {...this.props || {}, ...this.events || {}}), this._containerRef.nativeElement);\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tReactDOM.unmountComponentAtNode(this._containerRef.nativeElement);\n\t}\n\n}\n","import { Directive, OnInit, OnChanges, SimpleChanges, Input, ViewContainerRef, ComponentFactoryResolver, Injector } from '@angular/core';\nimport { get } from 'lodash';\n\nimport { ReactConnectorComponent } from './react-connector.component';\n\n@Directive({\n\tselector: '[reactConnectorComponent]'\n})\nexport class ReactConnectorDirective implements OnInit, OnChanges {\n\n\t@Input('reactConnectorComponent') reactConnectorComponent: any;\n\n\t@Input() reactProps: { [key: string]: any };\n\n\t@Input() reactEvents: { [key: string]: () => any };\n\n\t@Input() reactClassContainer: string;\n\n\tprivate _componentRef: ReactConnectorComponent;\n\n\tconstructor(\n\t\tprivate _viewContainerRef: ViewContainerRef,\n\t\tprivate _componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate _injector: Injector\n\t) { }\n\n\tngOnInit() {\n\t\tthis.render();\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tconst propChange = !get(changes, 'reactProps.firstChange', true);\n\t\tconst eventsChange = !get(changes, 'reactEvents.firstChange', true);\n\t\tconst classContainerChange = !get(changes, 'reactClassContainer.firstChange', true);\n\t\tif (propChange || eventsChange || classContainerChange) {\n\t\t\tthis._updateComponent();\n\t\t}\n\t}\n\n\tisClassComponent(component): boolean {\n\t\treturn (typeof component === 'function' && !!component.prototype.isReactComponent);\n\t}\n\n\tisFunctionComponent(component): boolean {\n\t\tconst componentString = String(component);\n\t\treturn (typeof component === 'function' && !!componentString.match(/React([^\\.]+)?\\.createElement/ig));\n\t}\n\n\tisReactComponent(component): boolean {\n\t\treturn (\n\t\t\tthis.isClassComponent(component) ||\n\t\t\tthis.isFunctionComponent(component)\n\t\t);\n\t}\n\n\trender() {\n\t\tconst isReactComponent = this.isReactComponent(this.reactConnectorComponent);\n\t\tif (isReactComponent && this._viewContainerRef) {\n\t\t\tthis._viewContainerRef.clear();\n\t\t\tconst componentFactory = this._componentFactoryResolver.resolveComponentFactory(ReactConnectorComponent);\n\t\t\tconst componentComponentRef = componentFactory.create(this._injector);\n\t\t\tthis._componentRef = componentComponentRef.instance;\n\t\t\tthis._componentRef.reactComponentRef = this.reactConnectorComponent;\n\t\t\tthis._componentRef.props = this.reactProps || undefined;\n\t\t\tthis._componentRef.events = this.reactEvents || undefined;\n\t\t\tthis._componentRef.classContainer = this.reactClassContainer || undefined;\n\t\t\tthis._viewContainerRef.insert(componentComponentRef.hostView);\n\t\t} else {\n\t\t\tconsole.error('Invalid react component ref:', this.reactConnectorComponent);\n\t\t}\n\t}\n\n\t_updateComponent() {\n\t\tthis._componentRef.props = this.reactProps || undefined;\n\t\tthis._componentRef.events = this.reactEvents || undefined;\n\t\tthis._componentRef.classContainer = this.reactClassContainer || undefined;\n\t\tthis._componentRef.render();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { merge } from 'lodash';\n\n@Injectable()\nexport class ReactConnectorService {\n\n\tupdateProps<T>(currentProps: object, newProps: object): T {\n\t\treturn merge({}, currentProps, newProps) as T;\n\t}\n\n\tupdateEvents<T>(currentEvents: object, newEvents: object): T {\n\t\treturn merge({}, currentEvents, newEvents) as T;\n\t}\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { ReactConnectorComponent } from './react-connector/react-connector.component';\nimport { ReactConnectorDirective } from './react-connector/react-connector.directive';\nimport { ReactConnectorService } from './react-connector/react-connector.service';\n\n@NgModule({\n\timports: [\n\t\tCommonModule\n\t],\n\tdeclarations: [\n\t\tReactConnectorComponent,\n\t\tReactConnectorDirective\n\t],\n\tproviders: [\n\t\tReactConnectorService\n\t],\n\texports: [\n\t\tReactConnectorDirective\n\t]\n})\nexport class ReactConnectorModule {}\n","/*\n * Public API Surface of ngx-react-connector\n */\n\nexport { ReactConnectorDirective } from './lib/react-connector/react-connector.directive';\nexport { ReactConnectorService } from './lib/react-connector/react-connector.service';\nexport { ReactConnectorModule } from './lib/react-connector.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["ReactDOM.render","React.createElement","ReactDOM.unmountComponentAtNode","i0.ɵɵelement","i0.ɵɵproperty"],"mappings":"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"}